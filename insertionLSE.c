/* C program for insertion sort on a linked list */
#include<stdio.h>
#include<stdlib.h>
#define TAM 1000
/* Link list node */
struct Node
{
    int data;
    struct Node* next;
};

// Function to insert a given node in a sorted linked list
void sortedInsert(struct Node**, struct Node*);

// function to sort a singly linked list using insertion sort
void insertionSort(struct Node **head_ref)
{
    // Initialize sorted linked list
    struct Node *sorted = NULL;

    // Traverse the given linked list and insert every
    // node to sorted
    struct Node *current = *head_ref;
    while (current != NULL)
    {
        // Store next for next iteration
        struct Node *next = current->next;

        // insert current in sorted linked list
        sortedInsert(&sorted, current);

        // Update current
        current = next;
    }

    // Update head_ref to point to sorted linked list
    *head_ref = sorted;
}

/* function to insert a new_node in a list. Note that this
  function expects a pointer to head_ref as this can modify the
  head of the input linked list (similar to push())*/
void sortedInsert(struct Node** head_ref, struct Node* new_node)
{
    struct Node* current;
    /* Special case for the head end */
    if (*head_ref == NULL || (*head_ref)->data >= new_node->data)
    {
        new_node->next = *head_ref;
        *head_ref = new_node;
    }
    else
    {
        /* Locate the node before the point of insertion */
        current = *head_ref;
        while (current->next!=NULL &&
               current->next->data < new_node->data)
        {
            current = current->next;
        }
        new_node->next = current->next;
        current->next = new_node;
    }
}

/* BELOW FUNCTIONS ARE JUST UTILITY TO TEST sortedInsert */

/* Function to print linked list */
void printList(struct Node *head)
{
    struct Node *temp = head;
    while(temp != NULL)
    {
        printf("%d  ", temp->data);
        temp = temp->next;
    }
}

/* A utility function to insert a node at the beginning of linked list */
void push(struct Node** head_ref, int new_data)
{
    struct Node *new_node;
    /* allocate node */
    new_node = (struct Node*)malloc(sizeof(struct Node));

    /* put in the data  */
    new_node->data  = new_data;

    /* link the old list off the new node */
    new_node->next = (*head_ref);

    /* move the head to point to the new node */
    (*head_ref)    = new_node;
}


// Driver program to test above functions
int main()
{
    int A[TAM]= {157, 109, 42, 863, 782, 481, 714, 932, 493, 804, 552, 807, 307, 501, 274, 217, 263, 352, 981, 204, 16, 927, 527, 822, 76, 543, 421, 383, 593, 739, 251, 490, 689, 705, 268, 51, 382, 658, 181, 858, 221, 929, 395, 967, 693, 289, 866, 761, 443, 364, 424, 228, 54, 420, 802, 945, 533, 716, 262, 93, 732, 220, 467, 66, 469, 153, 596, 468, 160, 264, 970, 659, 336, 35, 387, 49, 433, 288, 459, 57, 709, 887, 477, 61, 88, 594, 315, 308, 516, 331, 508, 240, 273, 565, 847, 624, 127, 964, 210, 751, 741, 926, 45, 738, 479, 56, 130, 94, 461, 363, 985, 913, 618, 333, 883, 771, 440, 448, 706, 550, 901, 796, 791, 170, 165, 118, 641, 544, 902, 583, 211, 106, 99, 427, 876, 708, 823, 26, 567, 651, 166, 222, 625, 691, 609, 158, 28, 400, 199, 349, 280, 668, 759, 719, 976, 34, 695, 13, 973, 324, 983, 602, 506, 940, 463, 92, 68, 954, 834, 538, 347, 415, 810, 769, 591, 605, 366, 580, 494, 953, 134, 826, 777, 171, 820, 346, 856, 480, 484, 200, 41, 557, 298, 655, 357, 853, 388, 694, 828, 84, 589, 776, 418, 238, 219, 413, 21, 986, 33, 453, 86, 891, 10, 182, 438, 871, 188, 729, 889, 536, 566, 900, 601, 269, 174, 458, 814, 285, 539, 600, 660, 859, 717, 654, 528, 111, 647, 657, 278, 345, 568, 500, 224, 864, 688, 180, 679, 389, 652, 60, 510, 399, 310, 537, 790, 496, 753, 365, 977, 734, 711, 478, 254, 775, 258, 226, 431, 899, 321, 301, 343, 703, 101, 692, 295, 700, 590, 132, 140, 146, 892, 318, 922, 579, 149, 937, 512, 37, 445, 233, 187, 449, 531, 414, 619, 168, 253, 649, 439, 25, 640, 488, 396, 50, 24, 768, 47, 805, 877, 549, 621, 697, 296, 384, 629, 338, 503, 319, 879, 104, 191, 410, 561, 521, 850, 570, 5, 522, 416, 836, 710, 676, 30, 744, 245, 377, 821, 460, 831, 139, 256, 74, 486, 597, 185, 1000, 148, 987, 880, 150, 961, 936, 151, 317, 868, 643, 197, 462, 758, 748, 923, 546, 436, 186, 898, 948, 249, 564, 947, 903, 22, 429, 650, 128, 727, 912, 606, 376, 1, 304, 277, 740, 573, 982, 873, 216, 595, 808, 611, 931, 896, 129, 857, 457, 816, 555, 215, 613, 801, 893, 370, 235, 232, 209, 125, 67, 712, 592, 380, 999, 293, 3, 806, 965, 990, 339, 152, 267, 223, 743, 669, 265, 975, 839, 65, 113, 212, 266, 882, 997, 408, 271, 117, 195, 824, 107, 452, 560, 934, 78, 44, 483, 634, 862, 102, 196, 120, 707, 20, 971, 675, 763, 764, 562, 341, 137, 637, 832, 581, 914, 585, 342, 841, 299, 959, 409, 610, 344, 792, 941, 572, 257, 122, 559, 869, 575, 530, 124, 608, 6, 845, 284, 327, 353, 446, 722, 419, 767, 704, 300, 935, 972, 681, 944, 553, 867, 966, 752, 906, 39, 156, 305, 287, 865, 604, 425, 811, 854, 55, 713, 495, 90, 894, 563, 351, 750, 207, 949, 789, 855, 724, 72, 244, 840, 757, 755, 234, 70, 984, 385, 63, 119, 248, 286, 392, 672, 766, 992, 939, 179, 451, 950, 577, 851, 175, 699, 401, 17, 313, 993, 227, 827, 81, 526, 465, 946, 403, 726, 4, 243, 715, 628, 29, 890, 762, 444, 435, 334, 320, 991, 116, 390, 144, 329, 874, 623, 247, 746, 411, 229, 91, 386, 15, 603, 994, 231, 925, 554, 962, 517, 631, 77, 393, 497, 819, 907, 422, 314, 918, 64, 237, 916, 270, 98, 849, 133, 518, 774, 627, 103, 969, 184, 514, 648, 919, 642, 778, 292, 162, 250, 815, 246, 848, 797, 535, 474, 787, 661, 829, 172, 312, 369, 670, 558, 747, 685, 513, 96, 718, 40, 136, 911, 202, 476, 742, 291, 147, 360, 636, 569, 59, 908, 323, 737, 645, 145, 402, 578, 933, 860, 773, 612, 702, 504, 760, 720, 548, 957, 114, 881, 350, 316, 381, 872, 794, 556, 653, 138, 58, 417, 614, 143, 434, 464, 545, 574, 770, 825, 97, 632, 532, 616, 803, 835, 161, 447, 406, 684, 183, 242, 723, 356, 765, 680, 85, 178, 956, 405, 733, 615, 664, 46, 163, 491, 800, 786, 818, 620, 201, 780, 456, 915, 7, 487, 442, 368, 297, 95, 701, 772, 53, 904, 241, 690, 470, 259, 239, 485, 19, 878, 472, 198, 728, 89, 450, 529, 275, 302, 473, 586, 687, 534, 666, 141, 374, 426, 928, 32, 968, 781, 325, 272, 617, 423, 683, 218, 798, 394, 80, 519, 639, 142, 330, 665, 11, 817, 952, 36, 547, 721, 955, 62, 630, 502, 205, 938, 540, 260, 499, 588, 279, 910, 644, 489, 730, 73, 784, 785, 348, 638, 830, 795, 895, 996, 951, 921, 123, 482, 998, 454, 749, 373, 375, 397, 283, 492, 838, 391, 920, 372, 303, 498, 995, 75, 524, 622, 189, 112, 678, 523, 193, 441, 8, 71, 52, 646, 361, 23, 337, 698, 783, 686, 633, 635, 509, 169, 905, 788, 100, 471, 306, 525, 736, 322, 43, 82, 735, 12, 371, 176, 667, 542, 943, 917, 110, 379, 398, 607, 173, 541, 355, 154, 311, 69, 754, 884, 332, 108, 378, 428, 942, 340, 875, 14, 843, 213, 671, 599, 282, 362, 980, 214, 861, 756, 177, 190, 159, 888, 779, 673, 455, 511, 979, 812, 662, 230, 206, 731, 48, 963, 571, 31, 520, 974, 960, 335, 115, 813, 696, 978, 682, 507, 404, 587, 551, 430, 27, 131, 135, 121, 38, 799, 437, 358, 359, 626, 576, 598, 167, 309, 466, 412, 208, 192, 844, 885, 328, 252, 886, 897, 842, 663, 79, 793, 745, 852, 236, 18, 515, 809, 432, 2, 326, 870, 164, 9, 367, 930, 924, 677, 290, 674, 276, 725, 846, 909, 354, 87, 105, 261, 194, 958, 475, 155, 294, 833, 584, 988, 582, 83, 407, 225, 989, 505, 255, 281, 656, 126, 203, 837};
    int i;
    struct Node *a = NULL;

    for(i = 0; i < TAM; i++){
        push(&a, A[i]);
    }

    insertionSort(&a);

    return 0;
}
